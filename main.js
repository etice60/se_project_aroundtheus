!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e,t){const r=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),r.textContent=e.validationMessage,r.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){if(this._hasInvalidInput(this._inputEls))return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},t=class{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._popupElementCloseBtn=this._popupElement.querySelector(".modal__close")}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal_is-opened")||e.target.classList.contains("modal__close"))&&this.close()})),this._popupElementCloseBtn.addEventListener("click",(()=>{this.close()}))}open(){this._popupElement.classList.add("modal_is-opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_is-opened"),document.removeEventListener("keyup",this._handleEscClose)}},r=class extends t{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>t[e.name]=e.value)),t}setEventListeners(){this._popupElement.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}};const s=new class{constructor(e){let{baseUrl:t,authToken:r}=e;this._baseUrl=t,this._authToken=r}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authToken}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.error(e)}))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authToken}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.error(e)}))}editUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authToken},body:JSON.stringify({name:e.name,about:e.about})})}addCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:r})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",authToken:"1634fdcb-9403-4d55-a456-722f52658f70"}),o=(document.querySelector("#card-template").content.querySelector(".card"),document.querySelector(".card__list"),document.querySelector("#edit-modal")),n=(o.querySelector(".modal__button"),document.querySelector("#add-card-modal")),i=o.querySelector(".modal__form"),l=n.querySelector(".modal__form"),a=document.querySelector("#card-image"),c=(document.querySelector(".modal__card-image-preview"),document.querySelector(".modal__title"),n.querySelector(".modal__button"),document.querySelector(".profile__edit-button")),d=o.querySelector("#modal-close-button"),u=(n.querySelector("#card-close-button"),document.querySelector(".profile__title")),_=document.querySelector(".profile__description"),h=document.querySelector(".profile__add-button"),m=(a.querySelector(".modal__image-close-button"),new class{constructor(e,t){this.name=e,this.description=t}getUserInfo(){return{description:this.description.textContent,name:this.name.textContent}}setUserInfo(e,t){this.name.textContent=e,this.description.textContent=t}}(u,_)),p=i.querySelector(".modal__input_type_name"),E=i.querySelector(".modal__input_type_description"),S=(l.querySelector(".modal__input_type_title"),l.querySelector(".modal__input_type_url"),"#card-template"),y={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},v=o.querySelector(".modal__form"),b=n.querySelector(".modal__form"),f=new e(y,v),q=new e(y,b);f.enableValidation(),q.enableValidation();const C=new r("#add-card-modal",(function(e){s.addCard(e).then((e=>{B({name:e.title,link:e.url,data:e}),C.close()}))}));C.setEventListeners();const k=new r("#edit-modal",(function(e){m.setUserInfo(e.title,e.description),k.close()}));k.setEventListeners(),Promise.all([s.getUserInfo(),s.getInitialCards()]).then((e=>{let[t,r]=e;m.setUserInfo(r),L.renderItems(t)}));const L=new class{constructor(e,t){let{renderer:r,items:s}=e;this._renderer=r,this._items=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({renderer:B},".card__list"),g=new class extends t{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector(".modal__card-image-preview"),this._previewText=this._popupElement.querySelector(".modal__title")}open(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._previewText.textContent=e,super.open()}}("#card-image");function I(e,t){g.open(e,t)}function B(e){const t=new class{constructor(e,t,r){let{name:s,link:o}=e;this._name=s,this._link=o,this._cardSelector=t,this._handleCardClick=r}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._renderCard(),this._setEventListeners(),this._cardElement}_renderCard(){this._cardElement.querySelector(".card__title").innerText=this._name,this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name}}(e,S,I);L.addItem(t.getView())}g.setEventListeners(),c.addEventListener("click",(function(){!function(){const e=m.getUserInfo();p.value=e.name,E.value=e.description}(),k.open()})),d.addEventListener("click",(()=>k.close())),h.addEventListener("click",(()=>{q.toggleButtonState(),C.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBVXlCLEVBQWNnQyxHQUNqRGhCLEVBQVlRLFFBQVFTLEVBQVFTLFVBQzlCLENBaEJBZixFQUFrQjNGLG9CQXNDbEJzRCxFQUFrQnBFLGlCQUFpQixTQU5uQyxZQU5BLFdBQ0UsTUFBTTZGLEVBQVdwQixFQUFTdEIsY0FDMUJ5QixFQUFVL0MsTUFBUWdFLEVBQVNqRSxLQUMzQmlELEVBQVNoRCxNQUFRZ0UsRUFBU25CLFdBQzVCLENBR0VrRCxHQUNBbEMsRUFBaUJ6RSxNQUNuQixJQUlBb0QsRUFBd0JyRSxpQkFBaUIsU0FBUyxJQUNoRDBGLEVBQWlCN0UsVUFFbkIyRCxFQUFpQnhFLGlCQUFpQixTQUFTLEtBQ3pDbUYsRUFBaUIvRixvQkFDakJnRyxFQUFhbkUsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vY29uc3QgY2FyZEltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2VcIik7XG4vL2NvbnN0IGNhcmRQcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXJkLWltYWdlLXByZXZpZXdcIik7XG4vL2NvbnN0IGNhcmRQcmV2aWV3VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcbi8vY29uc3QgY2FyZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIC8vIHRoaXMuX2hhbmRsZVByZXZpZXdQaWN0dXJlKCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICAvLyBfaGFuZGxlUHJldmlld1BpY3R1cmUoKSB7XG4gIC8vICAgY2FyZFByZXZpZXdJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAvLyAgIGNhcmRQcmV2aWV3SW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgLy8gICBjYXJkUHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgLy8gICBvcGVuTW9kYWwoY2FyZEltYWdlTW9kYWwpO1xuICAvLyB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fcmVuZGVyQ2FyZCgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG4gIF9yZW5kZXJDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikuaW5uZXJUZXh0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxzLnNvbWUoKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICAvL3RoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRDbG9zZUJ0biA9XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9pcy1vcGVuZWRcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XG5cbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IChmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcblxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcblxuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgYXV0aFRva2VuOiBcIjE2MzRmZGNiLTk0MDMtNGQ1NS1hNDU2LTcyMmY1MjY1OGY3MFwiLFxufSk7XG5cbi8qZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dOyovXG5cbmV4cG9ydCBjb25zdCBjYXJkRGF0YSA9IHtcbiAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuXG5leHBvcnQgY29uc3QgY2FyZExpc3RTZWxlY3RvciA9IFwiLmNhcmRfX2xpc3RcIjtcblxuLy8gV3JhcHBlcnNcbmNvbnN0IGNhcmRzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlzdFwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiA9XG4gIGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZEltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2VcIik7XG5jb25zdCBjYXJkUHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FyZC1pbWFnZS1wcmV2aWV3XCIpO1xuY29uc3QgY2FyZFByZXZpZXdUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlXCIpO1xuY29uc3QgYWRkQ2FyZFN1Ym1pdEJ1dHRvbiA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5cbi8vIEJ1dHRvbnMgYW5kIG90aGVyIERPTSBOb2Rlc1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWNsb3NlLWJ1dHRvblwiXG4pO1xuY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPVxuICBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRQcmV2aWV3Q2xvc2VCdXR0b24gPSBjYXJkSW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW1hZ2UtY2xvc2UtYnV0dG9uXCJcbik7XG5cbi8vIEZvcm0gRGF0YVxuXG4vKmFwaS5nZXRVc2VySW5mbygpLnRoZW4oKFVzZXJEYXRhKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICB1c2VyTmFtZTogVXNlckRhdGEudGl0bGUsXG4gICAgdXNlckRlc2NyaXB0aW9uOiBVc2VyRGF0YS5kZXNjcmlwdGlvbixcbiAgfSk7XG59KTsqL1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlVGl0bGUsIHByb2ZpbGVEZXNjcmlwdGlvbik7XG5cbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX25hbWVcIik7XG5jb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiXG4pO1xuXG5jb25zdCBjYXJkVGl0bGVJbnB1dCA9IGFkZENhcmRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiXG4pO1xuXG5jb25zdCBjYXJkVXJsSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV91cmxcIik7XG5cbmNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgICAgIFZhbGlkYXRpb24gICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGFkZEZvcm1FbGVtZW50ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgIHBvcHVwIGl0ZW1zICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdEZvcm1FbGVtZW50KTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkRm9ybUVsZW1lbnQpO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxuKTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhLCB3cmFwcGVyKSB7XG4vL2NvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spO1xuLy9jYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQuZ2V0VmlldygpKTtcbi8vfVxuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pLnRoZW4oXG4gIChbY2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gIH1cbik7XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcbiAgfSxcbiAgY2FyZExpc3RTZWxlY3RvclxuKTtcblxuY29uc3QgaW1hZ2VQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjY2FyZC1pbWFnZVwiKTtcbmltYWdlUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gIGltYWdlUHJldmlld1BvcHVwLm9wZW4obmFtZSwgbGluayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS50aXRsZSwgZGF0YS5kZXNjcmlwdGlvbik7XG4gIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbn1cblxuLy9sZXQgY2FyZFNlY3Rpb247XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljayk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZC5nZXRWaWV3KCkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG4gIGFwaS5hZGRDYXJkKGRhdGEpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZCh7IG5hbWU6IGRhdGEudGl0bGUsIGxpbms6IGRhdGEudXJsLCBkYXRhIH0pO1xuICAgIC8vIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XG4gICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcbn1cblxuZnVuY3Rpb24gb3BlblByb2ZpbGVGb3JtKCkge1xuICBmaWxsUHJvZmlsZUZvcm0oKTtcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG59XG5cbi8vIEV2ZW50IExpc3RlbmVyc1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRm9ybSk7XG5wcm9maWxlTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpXG4pO1xuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gRm9ybSBMaXN0ZXJuZXJzXG4vL3Byb2ZpbGVGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbi8vYWRkQ2FyZEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQpO1xuXG4vL3Byb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vL25hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcbi8vam9iSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XG4vL3RvZ2dsZUJ1dHRvblN0YXRlKFtuYW1lSW5wdXQsIGpvYklucHV0XSwgZWRpdFByb2ZpbGVTdWJtaXRCdXR0b24sIGNvbmZpZyk7XG4vL29wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbi8vfSk7XG5cbi8vYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFkZENhcmRQb3B1cC5jbG9zZSgpKTtcblxuLy9pbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHJlbmRlckNhcmQoY2FyZERhdGEsIGNhcmRzV3JhcCkpO1xuXG4vKltlZGl0UHJvZmlsZU1vZGFsLCBhZGRDYXJkTW9kYWwsIGNhcmRJbWFnZU1vZGFsXS5mb3JFYWNoKChtb2RhbCkgPT4ge1xuKm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoXG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICApIHtcbiAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICAgIH1cbiAgfSk7XG59KTsqL1xuXG4vL2NhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG4vL2V2dC5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gY29uc3QgbmFtZSA9IGNhcmRUaXRsZUlucHV0LnZhbHVlO1xuLy8gY29uc3QgbGluayA9IGNhcmRVcmxJbnB1dC52YWx1ZTtcbi8vIHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0sIGNhcmRzV3JhcCk7XG4vL2Nsb3NlTW9kYWwoYWRkQ2FyZE1vZGFsKTtcbi8vYWRkQ2FyZEZvcm1FbGVtZW50LnJlc2V0KCk7XG4vL3RvZ2dsZUJ1dHRvblN0YXRlKFxuLy8gW2NhcmRUaXRsZUlucHV0LCBjYXJkVXJsSW5wdXRdLFxuLy9hZGRDYXJkU3VibWl0QnV0dG9uLFxuLy9jb25maWdcbi8vKTtcbi8vfVxuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBhdXRoVG9rZW4gfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2F1dGhUb2tlbiA9IGF1dGhUb2tlbjtcbiAgfVxuICAvLyBHRVQgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT5cbiAgICAgICAgcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gICAgICApXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT5cbiAgICAgICAgcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gICAgICApXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyhjYXJkRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogY2FyZERhdGEuYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG59XG5cbi8vcmVtb3ZlQ2FyZCgpO1xuXG4vLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgICAgbmFtZTogdGhpcy5uYW1lLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMubmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIGl0ZW1zIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19jYXJkLWltYWdlLXByZXZpZXdcIlxuICAgICk7XG4gICAgdGhpcy5fcHJldmlld1RleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdUZXh0LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInNvbWUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX3BvcHVwRWxlbWVudENsb3NlQnRuIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0TGlzdCIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiYXBpIiwiYmFzZVVybCIsImF1dGhUb2tlbiIsIl9iYXNlVXJsIiwiX2F1dGhUb2tlbiIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZ2V0VXNlckluZm8iLCJlZGl0VXNlckluZm8iLCJjYXJkRGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhZGRDYXJkIiwiX3JlZjIiLCJsaW5rIiwiZWRpdFByb2ZpbGVNb2RhbCIsImNvbnRlbnQiLCJhZGRDYXJkTW9kYWwiLCJwcm9maWxlRm9ybUVsZW1lbnQiLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJjYXJkSW1hZ2VNb2RhbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJhZGROZXdDYXJkQnV0dG9uIiwidXNlckluZm8iLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjYXJkU2VsZWN0b3IiLCJlZGl0Rm9ybUVsZW1lbnQiLCJhZGRGb3JtRWxlbWVudCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZGF0YSIsImNyZWF0ZUNhcmQiLCJ0aXRsZSIsInVybCIsImVkaXRQcm9maWxlUG9wdXAiLCJhbGwiLCJjYXJkcyIsInVzZXJEYXRhIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJJdGVtcyIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJpdGVtcyIsIl9yZW5kZXJlciIsIl9pdGVtcyIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbWFnZVByZXZpZXdQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3ByZXZpZXdUZXh0Iiwic3JjIiwiYWx0IiwiaGFuZGxlQ2FyZENsaWNrIiwibmV3Q2FyZCIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkRWxlbWVudCIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwidG9nZ2xlIiwiZ2V0VmlldyIsImNsb25lTm9kZSIsIl9yZW5kZXJDYXJkIiwiaW5uZXJUZXh0IiwiZmlsbFByb2ZpbGVGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==
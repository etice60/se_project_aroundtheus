!function(){var e={240:function(){new class{constructor(e){let{baseUrl:t,authToken:r}=e;this._baseUrl=t,this._authToken=r}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authToken}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error("Error:",e),e}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6","Content-Type":"application/json"}})}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e,t){const r=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),r.textContent=e.validationMessage,r.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){if(this._hasInvalidInput(this._inputEls))return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},t=class{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._popupElementCloseBtn=this._popupElement.querySelector(".modal__close")}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal_is-opened")||e.target.classList.contains("modal__close"))&&this.close()})),this._popupElementCloseBtn.addEventListener("click",(()=>{this.close()}))}open(){this._popupElement.classList.add("modal_is-opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_is-opened"),document.removeEventListener("keyup",this._handleEscClose)}},s=class extends t{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>t[e.name]=e.value)),t}setEventListeners(){this._popupElement.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}},n=r(240);new(r.n(n)())({baseUrl:"https://around-api.en.tripleten-services.com/v1",authToken:"bd244469-ba76-43ae-a142-ebc6d142a179"}).getCardList().then((e=>console.log(e))),document.querySelector("#card-template").content.querySelector(".card"),document.querySelector(".card__list");const o=document.querySelector("#edit-modal"),i=(o.querySelector(".modal__button"),document.querySelector("#add-card-modal")),a=o.querySelector(".modal__form"),l=i.querySelector(".modal__form"),c=document.querySelector("#card-image"),u=(document.querySelector(".modal__card-image-preview"),document.querySelector(".modal__title"),i.querySelector(".modal__button"),document.querySelector(".profile__edit-button")),d=o.querySelector("#modal-close-button"),_=(i.querySelector("#card-close-button"),document.querySelector(".profile__title")),p=document.querySelector(".profile__description"),m=document.querySelector(".profile__add-button"),h=(c.querySelector(".modal__image-close-button"),new class{constructor(e,t){this.name=e,this.description=t}getUserInfo(){return{description:this.description.textContent,name:this.name.textContent}}setUserInfo(e,t){this.name.textContent=e,this.description.textContent=t}}(_,p)),E=a.querySelector(".modal__input_type_name"),v=a.querySelector(".modal__input_type_description"),y=(l.querySelector(".modal__input_type_title"),l.querySelector(".modal__input_type_url"),"#card-template"),S={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},f=o.querySelector(".modal__form"),b=i.querySelector(".modal__form"),g=new e(S,f),q=new e(S,b);g.enableValidation(),q.enableValidation();const L=new s("#add-card-modal",(function(e){B({name:e.title,link:e.url}),L.close()}));L.setEventListeners();const C=new s("#edit-modal",(function(e){h.setUserInfo(e.title,e.description),C.close()}));C.setEventListeners();const k=new class{constructor(e,t){let{renderer:r,items:s}=e;this._renderer=r,this._items=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:B},".card__list");k.renderItems();const w=new class extends t{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector(".modal__card-image-preview"),this._previewText=this._popupElement.querySelector(".modal__title")}open(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._previewText.textContent=e,super.open()}}("#card-image");function I(e,t){w.open(e,t)}function B(e){const t=new class{constructor(e,t,r){let{name:s,link:n}=e;this._name=s,this._link=n,this._cardSelector=t,this._handleCardClick=r}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._renderCard(),this._setEventListeners(),this._cardElement}_renderCard(){this._cardElement.querySelector(".card__title").innerText=this._name,this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name}}(e,y,I);k.addItem(t.getView())}w.setEventListeners(),u.addEventListener("click",(function(){!function(){const e=h.getUserInfo();E.value=e.name,v.value=e.description}(),C.open()})),d.addEventListener("click",(()=>C.close())),m.addEventListener("click",(()=>{q.toggleButtonState(),L.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVLEdBQ2IzSyxLQUFLNEssY0FDTDVLLEtBQUs2RSxxQkFDRTdFLEtBQUtzSyxZQUNkLENBQ0FNLFdBQUFBLEdBQ0U1SyxLQUFLc0ssYUFBYTFHLGNBQWMsZ0JBQWdCaUgsVUFBWTdLLEtBQUtrSyxNQUNqRWxLLEtBQUtzSyxhQUFhMUcsY0FBYyxnQkFBZ0JpRyxJQUFNN0osS0FBS21LLE1BQzNEbkssS0FBS3NLLGFBQWExRyxjQUFjLGdCQUFnQmtHLElBQU05SixLQUFLa0ssS0FDN0QsR0lrR3lCRixFQUFVL0IsRUFBYzhCLEdBQ2pEaEIsRUFBWVEsUUFBUVUsRUFBUVMsVUFDOUIsQ0FkQWhCLEVBQWtCOUQsb0JBa0NsQjBCLEVBQWtCdEMsaUJBQWlCLFNBTm5DLFlBTkEsV0FDRSxNQUFNOEYsRUFBV25ELEVBQVNFLGNBQzFCRSxFQUFVcEIsTUFBUW1FLEVBQVNwRSxLQUMzQnNCLEVBQVNyQixNQUFRbUUsRUFBU2xELFdBQzVCLENBR0VtRCxHQUNBakMsRUFBaUIvQyxNQUNuQixJQUlBd0IsRUFBd0J2QyxpQkFBaUIsU0FBUyxJQUNoRDhELEVBQWlCbkQsVUFFbkIrQixFQUFpQjFDLGlCQUFpQixTQUFTLEtBQ3pDc0QsRUFBaUJsRSxvQkFDakJtRSxFQUFheEMsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGF1dGhUb2tlbiB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5fYXV0aFRva2VuID0gYXV0aFRva2VuO1xuICB9XG4gIC8vIEdFVCBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkc1xuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PlxuICAgICAgICByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgICAgIClcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSk7XG4gIH1cblxuICAvL2dldFVzZXJJbmZvKCk7XG5cbiAgLy8gYWRkQ2FyZCgpO1xuXG4gIC8vcmVtb3ZlQ2FyZCgpO1xufVxuXG4vLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJjNTZlMzBkYy0yODgzLTQyNzAtYTU5ZS1iMmY3YmFlOTY5YzZcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvL2NvbnN0IGNhcmRJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xuLy9jb25zdCBjYXJkUHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FyZC1pbWFnZS1wcmV2aWV3XCIpO1xuLy9jb25zdCBjYXJkUHJldmlld1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fdGl0bGVcIik7XG4vL2NvbnN0IGNhcmRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbmNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAvLyB0aGlzLl9oYW5kbGVQcmV2aWV3UGljdHVyZSgpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgLy8gX2hhbmRsZVByZXZpZXdQaWN0dXJlKCkge1xuICAvLyAgIGNhcmRQcmV2aWV3SW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgLy8gICBjYXJkUHJldmlld0ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gIC8vICAgY2FyZFByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gIC8vICAgb3Blbk1vZGFsKGNhcmRJbWFnZU1vZGFsKTtcbiAgLy8gfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX3JlbmRlckNhcmQoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxuICBfcmVuZGVyQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLmlubmVyVGV4dCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWwpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgLy90aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50Q2xvc2VCdG4gPVxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfaXMtb3BlbmVkXCIpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50Q2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAoZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKSk7XG5cbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGF1dGhUb2tlbjogXCJiZDI0NDQ2OS1iYTc2LTQzYWUtYTE0Mi1lYmM2ZDE0MmExNzlcIixcbn0pO1xuXG5hcGkuZ2V0Q2FyZExpc3QoKS50aGVuKChyZXMpID0+IGNvbnNvbGUubG9nKHJlcykpO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBjYXJkRGF0YSA9IHtcbiAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuXG5leHBvcnQgY29uc3QgY2FyZExpc3RTZWxlY3RvciA9IFwiLmNhcmRfX2xpc3RcIjtcblxuLy8gV3JhcHBlcnNcbmNvbnN0IGNhcmRzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlzdFwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiA9XG4gIGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZEltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2VcIik7XG5jb25zdCBjYXJkUHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FyZC1pbWFnZS1wcmV2aWV3XCIpO1xuY29uc3QgY2FyZFByZXZpZXdUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlXCIpO1xuY29uc3QgYWRkQ2FyZFN1Ym1pdEJ1dHRvbiA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5cbi8vIEJ1dHRvbnMgYW5kIG90aGVyIERPTSBOb2Rlc1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWNsb3NlLWJ1dHRvblwiXG4pO1xuY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPVxuICBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRQcmV2aWV3Q2xvc2VCdXR0b24gPSBjYXJkSW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW1hZ2UtY2xvc2UtYnV0dG9uXCJcbik7XG5cbi8vIEZvcm0gRGF0YVxuLy8gMS4gbWFrZSBzdXJlIGJvdGggYXJncyBhcmUgcHJvZmlsZSBub3QgaW5wdXQgZmllbGRzXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlVGl0bGUsIHByb2ZpbGVEZXNjcmlwdGlvbik7XG5cbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX25hbWVcIik7XG5jb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiXG4pO1xuXG5jb25zdCBjYXJkVGl0bGVJbnB1dCA9IGFkZENhcmRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiXG4pO1xuXG5jb25zdCBjYXJkVXJsSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV91cmxcIik7XG5cbmNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgICAgIFZhbGlkYXRpb24gICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGFkZEZvcm1FbGVtZW50ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgIHBvcHVwIGl0ZW1zICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdEZvcm1FbGVtZW50KTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkRm9ybUVsZW1lbnQpO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxuKTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhLCB3cmFwcGVyKSB7XG4vL2NvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spO1xuLy9jYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQuZ2V0VmlldygpKTtcbi8vfVxuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcbiAgfSxcbiAgY2FyZExpc3RTZWxlY3RvclxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuY29uc3QgaW1hZ2VQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjY2FyZC1pbWFnZVwiKTtcbmltYWdlUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gIGltYWdlUHJldmlld1BvcHVwLm9wZW4obmFtZSwgbGluayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS50aXRsZSwgZGF0YS5kZXNjcmlwdGlvbik7XG4gIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkLmdldFZpZXcoKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGRhdGEpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoeyBuYW1lOiBkYXRhLnRpdGxlLCBsaW5rOiBkYXRhLnVybCB9KTtcbiAgLy8gY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xufVxuXG5mdW5jdGlvbiBvcGVuUHJvZmlsZUZvcm0oKSB7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn1cblxuLy8gRXZlbnQgTGlzdGVuZXJzXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblByb2ZpbGVGb3JtKTtcbnByb2ZpbGVNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKClcbik7XG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyBGb3JtIExpc3Rlcm5lcnNcbi8vcHJvZmlsZUZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuLy9hZGRDYXJkRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCk7XG5cbi8vcHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuLy9qb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbi8vdG9nZ2xlQnV0dG9uU3RhdGUoW25hbWVJbnB1dCwgam9iSW5wdXRdLCBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcbi8vb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xuLy99KTtcblxuLy9hZGRDYXJkTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYWRkQ2FyZFBvcHVwLmNsb3NlKCkpO1xuXG4vL2luaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4gcmVuZGVyQ2FyZChjYXJkRGF0YSwgY2FyZHNXcmFwKSk7XG5cbi8qW2VkaXRQcm9maWxlTW9kYWwsIGFkZENhcmRNb2RhbCwgY2FyZEltYWdlTW9kYWxdLmZvckVhY2goKG1vZGFsKSA9PiB7XG4qbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICkge1xuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gICAgfVxuICB9KTtcbn0pOyovXG5cbi8vY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcbi8vZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4vLyBjb25zdCBuYW1lID0gY2FyZFRpdGxlSW5wdXQudmFsdWU7XG4vLyBjb25zdCBsaW5rID0gY2FyZFVybElucHV0LnZhbHVlO1xuLy8gcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSwgY2FyZHNXcmFwKTtcbi8vY2xvc2VNb2RhbChhZGRDYXJkTW9kYWwpO1xuLy9hZGRDYXJkRm9ybUVsZW1lbnQucmVzZXQoKTtcbi8vdG9nZ2xlQnV0dG9uU3RhdGUoXG4vLyBbY2FyZFRpdGxlSW5wdXQsIGNhcmRVcmxJbnB1dF0sXG4vL2FkZENhcmRTdWJtaXRCdXR0b24sXG4vL2NvbmZpZ1xuLy8pO1xuLy99XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgaXRlbXMgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKHRoaXMuX3JlbmRlcmVyKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX2NhcmQtaW1hZ2UtcHJldmlld1wiXG4gICAgKTtcbiAgICB0aGlzLl9wcmV2aWV3VGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fcHJldmlld1RleHQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwidGhpcyIsIl9iYXNlVXJsIiwiX2F1dGhUb2tlbiIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInNvbWUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfcG9wdXBFbGVtZW50Q2xvc2VCdG4iLCJldnQiLCJjbG9zZSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRMaXN0IiwiZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwicmVzZXQiLCJBcGkiLCJnZXRDYXJkTGlzdCIsImxvZyIsImNvbnRlbnQiLCJlZGl0UHJvZmlsZU1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZUZvcm1FbGVtZW50IiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwiY2FyZEltYWdlTW9kYWwiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVNb2RhbENsb3NlQnV0dG9uIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjYXJkU2VsZWN0b3IiLCJlZGl0Rm9ybUVsZW1lbnQiLCJhZGRGb3JtRWxlbWVudCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZGF0YSIsImNyZWF0ZUNhcmQiLCJ0aXRsZSIsImxpbmsiLCJ1cmwiLCJlZGl0UHJvZmlsZVBvcHVwIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiaXRlbXMiLCJfcmVuZGVyZXIiLCJfaXRlbXMiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbWFnZVByZXZpZXdQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3ByZXZpZXdUZXh0Iiwic3JjIiwiYWx0IiwiaGFuZGxlQ2FyZENsaWNrIiwiY2FyZERhdGEiLCJuZXdDYXJkIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRFbGVtZW50IiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJ0b2dnbGUiLCJnZXRWaWV3IiwiY2xvbmVOb2RlIiwiX3JlbmRlckNhcmQiLCJpbm5lclRleHQiLCJ1c2VyRGF0YSIsImZpbGxQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=